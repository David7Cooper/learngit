<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cooper.crm.dao.EmployeeDao"><!-- 接口路径 -->
	<!-- <select id="selectAll" resultType="com.cooper.crm.bean.Employee">
		select * from employee
	</select> -->
	
<!-- 使用resultMap—————————————————————————————————————————————————————————————— -->
	<resultMap type="com.cooper.crm.bean.Employee" id="resultEmployeeMap">
		<id property="id" column="id"></id>
		<result property="username" column="username"></result>
		<result property="pass" column="pass"></result>
		<result property="nickname" column="nickname"></result>
		<result property="realname" column="realname"></result>
		<result property="jobInfoId" column="jobInfoId"></result>
		<result property="departmentId" column="departmentId"></result>
		<result property="phoneNo" column="phoneNo"></result>
		<result property="officeTel" column="officeTel"></result>
		<result property="workStatu" column="workStatu"></result>
		<association property="jobInfo" javaType="com.cooper.crm.bean.JobInfo">
			<id property="id" column="jobInfoId"></id>
			<result property="job" column="job"></result>
			<result property="departmentId" column="departmentId"></result>
			<association property="department" javaType="com.cooper.crm.bean.Department">
				<id property="id" column="departmentId"/>
				<result property="dname" column="dname"/>
			</association>
		</association>
		<association property="department" javaType="com.cooper.crm.bean.Department">
			<id property="id" column="departmentId"/>
			<result property="dname" column="dname"/>
		</association>
	</resultMap>
	
	
	
	<!-- <select id="selectAll" resultMap="EmployeeResultMapper">
		select d.*,e.*,j.* 
		from employee e,jobInfo j,department d
		where e.jobInfoId=j.id and e.departmentId = d.id
	</select> -->
	
	<resultMap type="com.cooper.crm.bean.Employee" id="EmployeeResultMapper">
		<id property="id" column="id"/>
		<result property="username" column="username"/>
		<result property="pass" column="pass"/>
		<result property="nickname" column="nickname"/>
		<result property="realname" column="realname"/>
		<result property="jobInfoId" column="jobInfoId"/>
		<result property="departmentId" column="departmentId"/>
		<result property="phoneNo" column="phoneNo"/>
		<result property="officeTel" column="officeTel"/>
		<result property="workStatu" column="workStatu"/>
		<association property="jobInfo" javaType="com.cooper.crm.bean.JobInfo">
			<id property="id" column="jobInfoId"/>
			<result property="job" column="job"/>
			<result property="departmentId" column="departmentId"/>
			<association property="department" javaType="com.cooper.crm.bean.Department">
				<id property="id" column="departmentId"/>
				<result property="dname" column="dname"/>
			</association>
		</association>
		<association property="department" javaType="com.cooper.crm.bean.Department">
			<id property="id" column="departmentId"/>
			<result property="dname" column="dname"/>
		</association>
	</resultMap>
	
	<select id="selectAll" resultMap="EmployeeResultMapper">
		select e.*,d.*,j.*
		from employee e,jobinfo j,department d
		where e.jobInfoId=j.id and j.departmentId=d.id and e.departmentId=d.id
	</select>
</mapper>